<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>注册</title>
    <!-- 请勿在项目正式环境中引用该 layui.css 地址 -->
    <link rel="stylesheet" href="node_modules/layui/dist/css/layui.css" />
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.7.1/jquery.js"></script>
  </head>
  <body>
    <style>
      .demo-reg-container {
        width: 320px;
        margin: 21px auto 0;
      }
      .demo-reg-other .layui-icon {
        position: relative;
        display: inline-block;
        margin: 0 2px;
        top: 2px;
        font-size: 26px;
      }
      .layui-form {
        margin-top: 200px;
      }
      h1 {
        text-align: center;
      }
    </style>
    <form class="layui-form">
      <h1>注册</h1>
      <div class="demo-reg-container">
        <div class="layui-form-item">
          <div class="layui-input-wrap">
            <div class="layui-input-prefix">
              <i class="layui-icon layui-icon-username"></i>
            </div>
            <input
              type="text"
              name="nickname"
              lay-verify="required"
              placeholder="昵称"
              autocomplete="off"
              class="layui-input"
              lay-affix="clear"
              id="username"
            />
          </div>
        </div>
        <div class="layui-form-item">
          <div class="layui-input-wrap">
            <div class="layui-input-prefix">
              <i class="layui-icon layui-icon-password"></i>
            </div>
            <input
              type="password"
              name="password"
              lay-verify="required"
              placeholder="密码"
              autocomplete="off"
              class="layui-input"
              id="reg-password"
              lay-affix="eye"
            />
          </div>
        </div>
        <div class="layui-form-item">
          <div class="layui-input-wrap">
            <div class="layui-input-prefix">
              <i class="layui-icon layui-icon-password"></i>
            </div>
            <input
              type="password"
              name="confirmPassword"
              lay-verify="required|confirmPassword"
              placeholder="确认密码"
              autocomplete="off"
              class="layui-input"
              lay-affix="eye"
              id="pas"
            />
          </div>
        </div>
        <input type="checkbox" id="vip" />是否要成为尊贵的VIP用户 <br />
        <br />
        <div class="layui-form-item">
          <button
            class="layui-btn layui-btn-fluid"
            lay-submit
            lay-filter="demo-reg"
            id="register"
          >
            注册
          </button>
        </div>
      </div>
    </form>

    <!-- 请勿在项目正式环境中引用该 layui.js 地址 -->
    <script src="node_modules/layui/dist/layui.js"></script>
    <script>
      $(function () {
        $("#register").click(function () {
          event.preventDefault();
          let vip1 = $("#vip").prop("checked");

          let vip = vip1 ? 1 : 0;
          console.log(vip);
          let obj = {
            username: $("#username").val(),
            password: $("#pas").val(),
            is_vip: vip,
          };
          console.log(obj);
          $.ajax({
            url: "http://localhost:3000/api/register",
            type: "POST",
            data: obj,
            success: function (res) {
              if (res.code == 200) {
                alert("登录成功");
                location.assign("login.html");
              }
            },
          });
        });
      });
    </script>
  </body>
</html>
